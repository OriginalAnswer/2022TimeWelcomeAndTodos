<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Home</title>
</head>
<body>
    <div class="screen">
        <section class="times">
            <h1 id="time"></h1>
            <h2 id="date"></h2>
        </section>
        <section id="greeting"></section>
        <section class="todo">
            <p id="letter">What is your main focus for today?</p>
            <form id="todoForm">
                <input type="text">
            </form>
            <div class="todos">
                <ul id="todosList"></ul>
            </div>
        </section>
    </div>

    <script type="text/javascript">
        // Time & Date--------------------------------------------------
        const time = document.querySelector('h1#time');
        function getTime(){
            const date = new Date();
            const h = String(date.getHours()).padStart(2,"0");
            const m = String(date.getMinutes()).padStart(2,"0");
            const s = String(date.getSeconds()).padStart(2,"0");
            time.innerText = `${h}:${m}:${s}`;
        }
        const today = document.querySelector('h2#date');
        const wArr = new Array('Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday');
        const mArr = new Array('January','February','March','April','May','June','July','August','September','October','November','December');
        function getDate(){
            const date = new Date();
            const d = String(date.getDate());
            const m = date.getMonth();
            const y = String(date.getFullYear());
            const dy = String(date.getDay());
            today.innerText = `${d} ${mArr[m]} ${y} ${wArr[dy]}`;
        }
        getTime();
        getDate();
        setInterval(getTime, 1000);
        // hi---------------------------------------------------
        const greeting = document.querySelector('#greeting');
        function greet(){
            let date = new Date();
            const h = date.getHours(); 
            if(h < 12){
                greeting.innerText = `Good Morningüòä`;
                document.body.style.color = 'rgba(139, 69, 19, 0.644)';
                document.body.style.backgroundImage = 'linear-gradient(135deg,rgb(245, 194, 194),rgb(255, 255, 255),rgb(255, 220, 107))';
            } else if (hours < 18) {
                greeting.innerText = `Good Afternoon`;
                document.body.style.color = '#000';
                document.body.style.backgroundImage = 'linear-gradient(135deg,rgb(255, 40, 40),rgb(255, 186, 38),rgb(140, 0, 255));';
            } else {
                greeting.innerText = `Good Evening`;
                document.body.style.backgroundImage = 'linear-gradient(135deg,rgb(1, 13, 68),rgb(51, 31, 141),rgb(135, 0, 168))';
                document.body.style.color = '#fff';
            }
        }
        greet();
        //todo------------------------------------------------------
        const toDoForm = document.getElementById("todoForm");
        const toDoInput = toDoForm.querySelector("input");
        const toDoList = document.getElementById("todoList");
        const TODOS_KEY = "todos";

        let toDos = [];
        //*****JSON.stringify(toDos) /JSON.parse()

        function saveToDos(){
            localStorage.setItem(TODOS_KEY, JSON.stringify(toDos));
        }

        function deleteToDo(event){
            const li = event.target.parentElement;
            li.remove();
            console.log(li.id);
            toDos = toDos.filter((toDo) => toDo.id !== parseInt(li.id));
            saveToDos();
        }
        function handleToDoSubmit(event){
            event.preventDefault();
            const newTodo = toDoInput.value;
            toDoInput.value = "";
            const newTodoObj = {
                text:newTodo,
                id:Date.now(),
            }
            toDos.push(newTodoObj);
            paintToDo(newTodoObj);
            saveToDos();
        }
        function paintToDo(newTodo){
            const li = document.createElement("li");
            li.id = newTodo.id;
            const span = document.createElement("span");
            span.innerText = newTodo.text;
            const button = document.createElement("button");
            button.innerText = "‚ùå";
            button.addEventListener("click", deleteToDo)
            li.appendChild(span);
            li.appendChild(button);
            toDoList.appendChild(li);
        }
        toDoForm.addEventListener("submit", handleToDoSubmit);

        const savedToDos = localStorage.getItem(TODOS_KEY);

        if(savedToDos !== null){
            const parsedToDos = JSON.parse(savedToDos);
            toDos = parsedToDos;
            parsedToDos.forEach(paintToDo)
        }
    </script>
</body>
</html>